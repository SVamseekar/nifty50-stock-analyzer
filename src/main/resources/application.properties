# STOCK ANALYZER - ENHANCED CONFIGURATION WITH MOVING AVERAGES

# Server Configuration
server.port=8081
server.servlet.context-path=/stock-analyzer
spring.application.name=stock-analyzer-with-ma

# MONGODB CONFIGURATION
spring.data.mongodb.uri=mongodb://localhost:27017/stock-analyzer-ma
spring.data.mongodb.auto-index-creation=true

# KITE API CONFIGURATION
kite.api.key=${KITE_API_KEY:not_configured}
kite.api.secret=${KITE_API_SECRET:not_configured}
kite.access.token=${KITE_ACCESS_TOKEN:not_configured}
kite.oauth.redirect.url=http://127.0.0.1:8081/stock-analyzer/api/auth/kite/callback
kite.api.base.url=https://api.kite.trade
kite.api.rate.limit.delay.ms=400
kite.api.retry.max.attempts=3

# APPLICATION FEATURE FLAGS
app.use.real.data=true
app.mock.data.enabled=true
app.nifty50.auto.fetch=true
app.scheduler.enabled=true

# NEW: MOVING AVERAGES CONFIGURATION
app.moving.averages.enabled=true
app.moving.averages.auto.calculate=true
app.moving.averages.batch.size=50

# SCHEDULING CONFIGURATION
spring.task.scheduling.pool.size=10
spring.task.scheduling.thread-name-prefix=stock-scheduler-

# ENHANCED LOGGING CONFIGURATION
logging.level.com.stockanalysis=INFO
logging.level.com.stockanalysis.service.MovingAverageService=DEBUG
logging.level.org.springframework.data.mongodb=INFO
logging.level.org.springframework.scheduling=INFO

logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.file.name=logs/stock-analyzer-ma.log
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# ACTUATOR CONFIGURATION
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true

# JSON CONFIGURATION
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.date-format=yyyy-MM-dd
spring.jackson.time-zone=Asia/Kolkata
spring.jackson.serialization.indent-output=true

# ERROR HANDLING
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on-param
server.error.include-exception=false

# PERFORMANCE TUNING
spring.data.mongodb.field-naming-strategy=org.springframework.data.mapping.model.SnakeCaseFieldNamingStrategy
spring.jpa.open-in-view=false

# DEVELOPMENT SETTINGS
spring.devtools.restart.enabled=true
debug=false