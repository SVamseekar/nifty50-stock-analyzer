<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<div th:fragment="common (pageTitle)">
    <div class="header" th:onclick="|window.location.href='@{/dashboard}'|">
        <h1>ðŸ”¹ Nifty 50 Stock Analyzer</h1>
        <div class="nifty-value">
            <p>Analysis Period: 2020-2025 | Status: <span th:text="${analysisStatus ?: 'Ready'}">Ready</span> | 
               Last Update: <span th:text="${lastUpdateTime ?: 'Never'}">Never</span></p>
        </div>
    </div>
    <div class="home-menu-buttons">
        <div style="display:flex; flex-wrap: wrap;">
            <a th:href="@{/dashboard}"><button type="button"><i class="fas fa-tachometer-alt"></i> Dashboard</button></a>
            <a th:href="@{/stock-analysis}"><button type="button"><i class="fas fa-chart-line"></i> Stock Analysis</button></a>
            <a th:href="@{/percentage-changes}"><button type="button"><i class="fas fa-percentage"></i> % Changes</button></a>
            <a th:href="@{/moving-averages}"><button type="button"><i class="fas fa-wave-square"></i> Moving Averages</button></a>
            <a th:href="@{/job-status}"><button type="button"><i class="fas fa-tasks"></i> Job Status</button></a>
            <a th:href="@{/top-performers}"><button type="button"><i class="fas fa-trophy"></i> Top Performers</button></a>
            <a th:href="@{/volatility-analysis}"><button type="button"><i class="fas fa-chart-area"></i> Volatility</button></a>
        </div>
    </div>
    <div class="page-title">
        <span th:text="${pageTitle}">Page Title</span>
        <span style="float: right; font-size: 14px; font-weight: normal;">
            <i class="fas fa-clock"></i> <span id="current-time"></span>
        </span>
    </div>
</div>

<div th:fragment="footer">
    <div class="footer">
        <span>Â© 2025 Nifty 50 Stock Analyzer | Powered by Zerodha Kite API | 
              <a href="https://github.com/your-repo" style="color: #2c5777;">GitHub</a> | 
              <a th:href="@{/api-docs}" style="color: #2c5777;">API Docs</a>
        </span>
    </div>
</div>

<!-- JavaScript for real-time clock -->
<script th:fragment="clock-script">
function updateClock() {
    const now = new Date();
    const timeString = now.toLocaleString('en-IN', {
        timeZone: 'Asia/Kolkata',
        hour12: true,
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
    });
    const clockElement = document.getElementById('current-time');
    if (clockElement) {
        clockElement.textContent = timeString;
    }
}

// Update clock immediately and then every second
updateClock();
setInterval(updateClock, 1000);
</script>
</html>